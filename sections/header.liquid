<header class="header" role="banner">
  <div class="header__container">
    <!-- Mobile menu toggle -->
    <button class="header__menu-toggle" aria-label="Toggle navigation" aria-expanded="false">
      <span class="hamburger"></span>
      <span class="hamburger"></span>
      <span class="hamburger"></span>
    </button>

    <!-- Logo/Shop Name -->
    <div class="header__logo">
      <h1 class="header__title">
        {{ shop.name | link_to: routes.root_url }}
      </h1>
    </div>

    <!-- Main navigation -->
    <nav class="header__navigation" role="navigation" aria-label="Main navigation">
      {% render 'header-menu', menu_handle: section.settings.menu %}
    </nav>

    <!-- Header icons -->
    <div class="header__icons">
      {% if section.settings.show_language_selector %}
        <div class="header__language-selector">
          {% comment %} Language selector would go here {% endcomment %}
          <select aria-label="Language selector">
            {% for locale in shop.published_locales %}
              <option
                value="{{ locale.iso_code }}"
                {% if locale.iso_code == cart.locale.iso_code %}
                  selected
                {% endif %}
              >
                {{ locale.endonym_name | capitalize }}
              </option>
            {% endfor %}
          </select>
        </div>
      {% endif %}

      {% if section.settings.show_country_selector %}
        <div class="header__country-selector">
          {% comment %} Country selector would go here {% endcomment %}
          <select aria-label="Country/region selector">
            <option value="US" selected>United States</option>
            <option value="CA">Canada</option>
            <option value="GB">United Kingdom</option>
          </select>
        </div>
      {% endif %}

      {% if section.settings.show_account and shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" aria-label="Account" class="header__account-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="material-icons"
          >
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </a>
      {% endif %}

      <a href="{{ routes.cart_url }}" class="header__cart-link" aria-label="Shopping cart">
        {% if cart.item_count > 0 %}
          <span class="cart-count">{{ cart.item_count }}</span>
        {% endif %}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="material-icons"
        >
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </a>
    </div>
  </div>
</header>

{% stylesheet %}
  .header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background-color: var(--color-background, white);
    border-bottom: 1px solid var(--color-foreground, #e0e0);
  }

  .header__container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .header__title {
    margin: 0;
  }

  .header__title a {
    text-decoration: none;
    color: inherit;
    font-size: 1.5rem;
    font-weight: bold;
  }

  .header__navigation {
    display: block;
  }

  .header__icons {
    display: flex;
    gap: 1.5rem;
    align-items: center;
    position: relative;
  }

  .header__icons a {
    position: relative;
    text-decoration: none;
    color: var(--color-foreground, inherit);
  }

  .cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: #ff6b6b;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
  }

  .header__menu-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }

  .hamburger {
    width: 25px;
    height: 3px;
    background-color: #333;
    margin: 3px 0;
    transition: 0.3s;
  }

  /* Responsive styles */
  @media (max-width: 768px) {
    .header__navigation {
      position: fixed;
      top: 0;
      left: -100%;
      width: 80%;
      height: 100vh;
      background-color: var(--color-background, white);
      transition: left 0.3s ease;
      z-index: 1001;
      padding: 5rem 1rem 1rem;
      overflow-y: auto;
    }

    .header__navigation.active {
      left: 0;
    }

    .header__menu-toggle {
      display: flex;
    }

    .header__container {
      padding: 0 1rem;
    }

    .header__icons {
      gap: 1rem;
    }
  }
{% endstylesheet %}

<style>
   .header {
     padding-top: {{ section.settings.padding_top }}px;
     padding-bottom: {{ section.settings.padding_bottom }}px;
   }

   {% if section.settings.logo_position == 'center' %}
     .header__container {
       justify-content: space-around;
     }

     .header__logo {
       order: 2;
       flex-grow: 1;
       text-align: center;
     }

     .header__menu-toggle {
       order: 1;
     }

     .header__icons {
       order: 3;
     }
   {% endif %}


   .header__language-selector select,
   .header__country-selector select {
     background: transparent;
     border: none;
     font-size: 1rem;
     color: var(--color-foreground, #333);
   }

   .header__account-icon,
   .header__cart-link {
     display: flex;
     align-items: center;
     justify-content: center;
   }

   .material-icons {
     width: 24px;
     height: 24px;
     stroke: var(--color-foreground, currentColor);
     fill: none;
     stroke-width: 2px;
   }

   .header__icons {
     align-items: center;
   }

  /* Responsive styles for mobile logo position */
   @media (max-width: 768px) {
     .header__container {
       {% if section.settings.mobile_logo_position == 'center' %}
         justify-content: space-around;
       {% endif %}
     }

     {% if section.settings.mobile_logo_position == 'center' %}
       .header__logo {
         order: 2;
         flex-grow: 1;
         text-align: center;
       }

       .header__menu-toggle {
         order: 1;
       }

       .header__icons {
         order: 3;
       }
     {% endif %}
   }
</style>

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    },
    {
      "type": "header",
      "content": "Logo Settings"
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo position",
      "default": "center",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "mobile_logo_position",
      "label": "Mobile logo position",
      "default": "center",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ]
    },
    {
      "type": "header",
      "content": "Utilities"
    },
    {
      "type": "checkbox",
      "id": "show_account",
      "label": "Show account",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_language_selector",
      "label": "Show language selector",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_country_selector",
      "label": "Show country/region selector",
      "default": false
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Top padding",
      "default": 16
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Bottom padding",
      "default": 16
    }
  ]
}
{% endschema %}
